project_name: "paintable-surface-segmentation"
experiment_name: "dinov2s_counting_head"

model:
  name: "dinov2_counting" # New model with head
  num_classes: 4
  pretrained: true
  encoder_name: "dinov2_vits14"  # backbone
  pretrained_repo: ""

training:
  batch_size: 8
  gradient_accumulation_steps: 1
  num_epochs: 50 
  learning_rate: 0.0001
  max_lr: 0.0005
  weight_decay: 0.01
  optimizer: "adamw"
  scheduler: "onecycle"
  warmup_ratio: 0.1
  seed: 42
  use_amp: false 
  early_stopping_patience: 15
  # Encoder freezing options
  freeze_encoder: true           
  unfreeze_epoch: 5
  encoder_lr_mult: 0.01          
  use_tta: true
  tta_every_n_epochs: 5
  
  # COUNTING HEAD CONFIG
  use_counting_loss: true
  counting_loss_weight: 0.1 # Weight relative to segmentation loss

loss:
  type: "combined"
  use_boundary_loss: true # OPTION: Set to false to disable
  boundary_weight: 0.1 
  focal_alpha: 0.25
  focal_gamma: 2.0
  label_smoothing: 0.1

data:
  root_dir: "data"
  sources: ["base", "extended"]
  image_size: 518
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1
  num_workers: 0

logging:
  use_wandb: true
  log_every_n_steps: 10
  save_checkpoint_every_n_epochs: 5
  output_dir: "outputs/dinov2_counting"

monitoring:
  track_gradients: true
  gradient_log_frequency: 10
  visualize_predictions_every_n_epochs: 5
