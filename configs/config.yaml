project_name: "paintable-surface-segmentation"
experiment_name: "segformer_binary_facade_no_freeze_b4"

model:
  name: "segformer_hf" # Options: unet_viable, segformer_hf, segformer_manual, deeplabv3plus, unetplusplus
  num_classes: 2
  pretrained: true
  encoder_name: "mit-b4"  # Updated to reflect B4
  pretrained_repo: "nvidia/segformer-b4-finetuned-cityscapes-1024-1024" # Upgraded from B2

training:
  batch_size: 4
  gradient_accumulation_steps: 2 # Effective Batch Size = 8
  num_epochs: 100 # Increased for better convergence with freezing
  learning_rate: 0.00006
  max_lr: 0.0003
  weight_decay: 0.01
  optimizer: "adamw"
  scheduler: "onecycle"
  warmup_ratio: 0.1
  seed: 42
  use_amp: false
  early_stopping_patience: 20
  # Encoder freezing options
  freeze_encoder: true           
  unfreeze_epoch: 10              # Unfreeze after initially training the decoder
  encoder_lr_mult: 0.1           # 10x lower learning rate for backbone

loss:
  type: "combined"  # CE + Dice for better stability and performance
  focal_alpha: 0.25
  focal_gamma: 2.0
  label_smoothing: 0.1
  class_weights: [1.0, 3.0]

data:
  root_dir: "data"
  image_size: 512
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1
  num_workers: 4

logging:
  use_wandb: true
  log_every_n_steps: 10
  save_checkpoint_every_n_epochs: 5
  output_dir: "outputs"

monitoring:
  track_gradients: true
  gradient_log_frequency: 10
  visualize_predictions_every_n_epochs: 5
